<!DOCTYPE HTML>
<html>
<head>
    <title>Network File System</title>
    <link rel="apple-touch-icon" sizes="180x180" href="../../images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon/favicon-16x16.png">
    <link rel="manifest" href="../../images/favicon/site.webmanifest">
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <link rel="stylesheet" href="../../assets/css/main.css"/>
    <noscript>
        <link rel="stylesheet" href="../../assets/css/noscript.css"/>
    </noscript>
</head>
<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper">

    <!-- Header -->
    <header id="header" class="alt">
        <nav>
            <a href="#menu">Menu</a>
        </nav>
    </header>

	<!-- Menu -->
	<nav id="menu">
		<ul class="links">
			<li><a href="../../index.html">Home</a></li>
			<li><a href="../../tools_landing.html">Hacking Tools</a></li>
			<li><a href="../../linux_landing.html">Vulnerabilities on Linux</a></li>
			<li><a href="../../windows_landing.html">Vulnerabilities on Windows</a></li>
			<li><a href="../../web_landing.html">Vulnerabilities on Web</a></li>
			<li><a href="../../malware_analyses_landing.html">Malware Analysis</a></li>
			<li><a href="../../network_services_landing.html">Network Services</a></li>
			<li><a href="../../ctf_landing.html">Capture the Flag</a></li>
			<li><a href="../../miscellaneous_landing.html">Miscellaneous</a></li>
			<li><a href="https://github.com/martinkubecka"><img alt="Github" src="../../images/github_logo.png"/></a></li>
		</ul>
	</nav>

    <!-- Main -->
    <div id="main" class="alt">

        <!-- One -->
        <section id="one">
            <div class="inner">
                <header class="major">
                    <h1>NFS</h1>
                </header>

                <span style="font-size: 16pt">2020/10/13</span><br><br>

                <br/>
                <ul>
                    <li><b>Network File System</b>&nbsp;allows a system to share directories and files with others over
                        a network
                    </li>
                    <li>by using NFS, users and programs can access files on remote systems almost as if they were local
                        files
                    </li>
                    <li>it does this by mounting all, or a portion of a file system on a server</li>
                    <li>the portion of the file system that is mounted can be accessed by clients with whatever
                        privileges are assigned to each file
                    </li>
                </ul>
                <ul>
                    <li>first, the client will request to mount a directory from a remote host on a local directory just
                        the same way it can mount a physical device
                    </li>
                    <li>the mount service will then act to connect to the relevant mount daemon using RPC (Remote
                        procedure call)
                    </li>
                    <li>the server checks if the user has permission to mount whatever directory has been requested</li>
                    <li>it will then return a file handle which uniquely identifies each file and directory that is on
                        the server
                    </li>
                </ul>
                <ul>
                    <li>if someone wants to access a file using NFS, an RPC call is placed to NFSD (the NFS daemon) on
                        the server
                    </li>
                    <li><u>this call takes parameters such as:</u></li>
                    <li style="list-style-type: none">
                        <ul>
                            <li>&nbsp;The file handle</li>
                            <li>&nbsp;The name of the file to be accessed</li>
                            <li>&nbsp;The user's, user ID</li>
                            <li>&nbsp;The user's group ID</li>
                        </ul>
                    </li>
                </ul>
                <ul>
                    <li>these are used in determining access rights to the specified file</li>
                    <li>this is what controls user permissions, I.E read and write of files.</li>
                </ul>
                <hr/>
                <ul>
                    <li style="list-style-type: none"><b><u>
                        <div style="text-align: left"><span style="font-size: 14pt">Enumeration</span></div>
                    </u></b></li>
                </ul>
                <ul>
                    <li>your client’s system needs a directory where all the content shared by the host server in the
                        export folder can be accessed
                    </li>
                    <li>you can create this folder anywhere on your system</li>
                    <li>once you've created this mount point, you can use the "mount" command to connect the NFS share
                        to the mount point on your machine
                    </li>
                    <li>Like so: <i>sudo mount -t nfs IP:share /tmp/mount/ -nolock</i></li>
                </ul>
                <ul>
                    <li style="list-style-type: none">
                        <ul>
                            <li style="list-style-type: none"><b>sudo</b>&#09;&#09;Run as root</li>
                            <li style="list-style-type: none"><b>mount</b>&#09;&#09;Execute the mount command</li>
                            <li style="list-style-type: none"><b>-t</b>&nbsp;<b>nfs</b>&#09;&#09;Type of device to
                                mount, then specifying that it's NFS
                            </li>
                            <li style="list-style-type: none"><b>IP:share</b>&#09;&#09;The IP Address of the NFS server,
                                and the name of the share we wish to mount
                            </li>
                            <li style="list-style-type: none"><b>-nolock</b>&#09;&#09;Specifies not to use NLM locking
                            </li>
                        </ul>
                    </li>
                </ul>
                <br/>
                <ul>
                    <li style="list-style-type: none"><img src="image.png"/></li>
                    <li style="list-style-type: none">
                        <ul>
                            <li style="list-style-type: none"></li>
                        </ul>
                    </li>
                    <li style="list-style-type: none"><img src="image 2.png"/></li>
                    <li style="list-style-type: none">
                        <ul>
                            <li style="list-style-type: none"></li>
                        </ul>
                    </li>
                    <li style="list-style-type: none"></li>
                    <li style="list-style-type: none"><img src="image 3.png"/></li>
                    <li style="list-style-type: none"></li>
                </ul>
                <hr/>
                <ul><b><u><span style="font-size: 14pt"><li style="list-style-type: none"></li>
</span></u></b>
                    <li style="list-style-type: none"><b><u><span style="font-size: 14pt">Exploitation</span></u></b>
                    </li>
                </ul>
                <br/>
                <ul>
                    <li>By default, on NFS shares- <i>Root Squashing</i>&nbsp;is enabled, and prevents anyone connecting
                        to the NFS share from having root access to the NFS volume
                    </li>
                    <li>Remote root users are assigned a user “nfsnobody” when connected, which has the<i>&nbsp;least
                        local privileges</i></li>
                    <li>If this is turned off, it can allow the creation of <b>SUID bit files</b>, allowing a remote
                        user root access to the connected system
                    </li>
                </ul>
                <br/>
                <ul>
                    <li style="list-style-type: none"><img src="image 4.png"/></li>
                    <li style="list-style-type: none"></li>
                    <li style="list-style-type: none"></li>
                    <li style="list-style-type: none"><img src="image 5.png"/></li>
                    <li style="list-style-type: none"></li>
                    <li>bash file: <a
                            href="https://github.com/polo-sec/writing/blob/master/Security%20Challenge%20Walkthroughs/Networks%202/bash">https://github.com/polo-sec/writing/blob/master/Security%20Challenge%20Walkthroughs/Networks%202/bash</a>
                    </li>
                    <li style="list-style-type: none"></li>
                    <li style="list-style-type: none"><img src="image 6.png"/></li>
                    <li style="list-style-type: none"></li>
                    <li style="list-style-type: none"><img src="image 7.png"/></li>
                    <li style="list-style-type: none"></li>
                </ul>


            </div>
        </section>
    </div>

    <!-- Contact -->
    <section id="contact">
        <div class="inner">
        </div>
    </section>

    <!-- Footer -->
    <footer id="footer">
        <div class="inner">
        </div>
    </footer>

</div>

<!-- Scripts -->
<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/jquery.scrolly.min.js"></script>
<script src="../../assets/js/jquery.scrollex.min.js"></script>
<script src="../../assets/js/browser.min.js"></script>
<script src="../../assets/js/breakpoints.min.js"></script>
<script src="../../assets/js/util.js"></script>
<script src="../../assets/js/main.js"></script>

</body>

</html>